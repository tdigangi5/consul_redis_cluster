---
# Test for all replication components of Redis
# We're using non-standard ports here so they don't conflict with other
# tests on Travis.
- hosts: all
  remote_user: root
  vars:
    redis_version: 3.2.8
    redis_password: redis
    redis_travis_ci: true
  roles:
    - role: ../../redis
      redis_port: 7379

    - role: ../../redis
      redis_port: 8379
      redis_slaveof: 192.168.10.11 7379
      redis_local_facts: false

    - role: ../../redis
      redis_sentinel: true
      redis_sentinel_port: 27379
      redis_sentinel_monitors:
        - name: mymaster
          host: 192.168.10.11
          port: 7379
          quorum: 1
          auth_pass: "{{ redis_password }}"
      redis_local_facts: false
